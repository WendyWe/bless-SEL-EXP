<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>BLESS æ­£å¿µç¤¾æœƒæƒ…ç·’èª¿ç¯€å¹³å°</title>

<style>

/* ===== ä½ åŸæœ¬çš„ CSS å®Œæ•´ä¿ç•™ ===== */

body {
  cursor: none;
  margin: 0;
  width: 100%;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Noto Sans TC', "PingFang TC", "Microsoft JhengHei", sans-serif;
  background: linear-gradient(-45deg, #e3f2fd, #f3e5f5, #e8f5e9, #fff9c4);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  overflow: hidden;
}

@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

#cursor-follower {
  width: 20px;
  height: 20px;
  background: rgba(255, 224, 130, 0.5);
  border-radius: 60%;
  position: fixed;
  pointer-events: none;
  z-index: 99999;
  transition: transform 0.1s ease-out;
  box-shadow: 0 0 15px rgba(255, 202, 40, 0.7),
              0 0 30px rgba(255, 236, 179, 0.4);
}

#app {
  text-align: center;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(15px);
  padding: 3rem;
  border-radius: 24px;
  max-width: 400px;
  width: 90%;
}

.login-input {
  width: 100%;
  padding: 12px 15px;
  margin: 10px 0;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.1);
}

.login-btn {
  background: #90caf9;
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 50px;
  cursor: pointer;
  font-size: 1rem;
}

.login-btn:hover {
  background: #bbdefb;
}

</style>
</head>

<body>

<div id="cursor-follower"></div>

<div id="app">
  <h1>BLESS</h1>
  <p>é¡˜åœ¨æ­¤åˆ»æ„Ÿå—åˆ°å¹³å®‰ã€å¹¸ç¦èˆ‡ç¥ç¦</p>

  <input type="text" id="username" placeholder="å¸³è™Ÿ" class="login-input">
  <input type="password" id="password" placeholder="å¯†ç¢¼" class="login-input">
  <button id="loginBtn" class="login-btn">ç™»å…¥</button>
</div>

<script>

/* ========= æ»‘é¼ å…‰é» ========= */

const follower = document.getElementById('cursor-follower');

document.addEventListener('mousemove', (e) => {
  follower.style.left = e.clientX - 10 + 'px';
  follower.style.top = e.clientY - 10 + 'px';
});

document.addEventListener('mousedown', () => {
  follower.style.transform = 'scale(0.8)';
});
document.addEventListener('mouseup', () => {
  follower.style.transform = 'scale(1)';
});


/* ========= ç™»å…¥é‚è¼¯ï¼ˆå®‰å…¨ç‰ˆï¼‰ ========= */

document.getElementById("loginBtn").addEventListener("click", async () => {

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!username || !password) {
    alert("è«‹è¼¸å…¥å¸³è™Ÿå¯†ç¢¼");
    return;
  }

  try {
    const response = await fetch("/api/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      credentials: 'include',
      body: JSON.stringify({ username, password })
    });

    const data = await response.json();

    if (!data.success) {
      alert(data.message || "ç™»å…¥å¤±æ•—");
      return;
    }

    // ğŸ” ä¸å†ä½¿ç”¨ localStorage
    // ä¾ group è‡ªå‹•å°å‘

    if (data.group === "A") {
      window.location.href = "/experimental/";
    } else if (data.group === "B") {
      window.location.href = "/shift/";
    } else {
      alert("å¸³è™Ÿçµ„åˆ¥è¨­å®šéŒ¯èª¤");
    }

  } catch (err) {
    console.error(err);
    alert("ç™»å…¥ç³»çµ±éŒ¯èª¤");
  }
});

</script>

</body>
</html>